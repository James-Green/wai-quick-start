function getById(e){return document.getElementById(e)}function showModal(e){var t=getById(this.id+"-holder");openModalId=this.id,focusedElementBeforeModal=document.activeElement,document.getElementsByTagName("main")[0].setAttribute("aria-hidden","true"),getById("modal-overlay").style.display="block",t.setAttribute("aria-hidden","false"),document.addEventListener("keydown",escapeKeyToClose),t.addEventListener("keydown",containTabKey),t.focus(),e.preventDefault()}function hideModal(e){var t=getById(openModalId+"-holder");openModalId=null,document.getElementsByTagName("main")[0].setAttribute("aria-hidden","false"),getById("modal-overlay").style.display="none",t.setAttribute("aria-hidden","true"),document.removeEventListener("keydown",escapeKeyToClose),t.removeEventListener("keydown",containTabKey),focusedElementBeforeModal.focus(),focusedElementBeforeModal=null,e.preventDefault()}function containTabKey(e){if(9==e.keyCode){for(var t=getById(openModalId+"-holder"),d=[],o=t.querySelectorAll(focusableElementsString),l=o.length;l--;d.unshift(o[l]));var a=d.indexOf(document.activeElement);e.shiftKey?0==a?d[d.length-1].focus():d[a-1].focus():a==d.length-1?d[0].focus():d[a+1].focus(),e.preventDefault()}}function escapeKeyToClose(e){27==e.keyCode&&(hideModal(e),e.preventDefault())}var focusableElementsString="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",focusedElementBeforeModal,openModalId;(function(){var e=document.querySelectorAll(".modal-open"),t=document.createElement("div");t.setAttribute("id","modal-overlay"),t.setAttribute("class","modal-overlay"),document.getElementsByTagName("body")[0].appendChild(t),t.addEventListener("click",hideModal),Array.prototype.forEach.call(e,function(e){modalHolder=getById(e.id+"-holder"),modalHolder.classList.add("modal-holder"),modalHolder.setAttribute("role","dialog"),modalHolder.setAttribute("aria-labelledby",e.id+"-title"),modalHolder.setAttribute("aria-describedby",e.id+"-desc"),modalHolder.setAttribute("aria-hidden","true"),modalHolder.setAttribute("tabindex","-1");var t=document.createElement("div");t.setAttribute("id",e.id+"-desc"),t.setAttribute("class","modal-desc"),t.innerHTML="Beginning of dialog window. Escape will cancel and close the window.",modalHolder.insertBefore(t,modalHolder.firstChild),modalTitle=getById(e.id+"-title"),modalTitle.classList.add("modal-title");var d=document.createElement("button");d.setAttribute("class","btn-close"),d.setAttribute("type","button"),d.setAttribute("aria-label","close"),d.innerHTML="&times;",d.addEventListener("click",hideModal),modalHolder.appendChild(d),e.addEventListener("click",showModal),document.getElementsByTagName("body")[0].appendChild(modalHolder)})}).call(this);